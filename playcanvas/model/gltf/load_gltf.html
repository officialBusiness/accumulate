<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>load_gltf</title>
	<meta name='viewport' content='width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no' />
	<link href="../../default_css.css" rel="stylesheet" type="text/css"/>
	<script src='../../../build/playcanvas.js'></script>
</head>
  <!--

	 -->
<body>
	<canvas id='application'></canvas>
	<script type="importmap">
		{
			"imports": {
				"pc": "../../../src/index.js",
				"playcanvas": "../../../src/index.js",
				"scripts": "../../../../scripts/"
			}
		}
	</script>
	<script type="module">
		// import * as pc from 'pc';

		// create a PlayCanvas application
		const canvas = document.getElementById('application');
		const app = new pc.Application(canvas, {
			mouse: new pc.Mouse(document.body),
			touch: new pc.TouchDevice(document.body)
		});

		app.setCanvasFillMode(pc.FILLMODE_FILL_WINDOW);
		app.setCanvasResolution(pc.RESOLUTION_AUTO);

		window.addEventListener('resize', function(){
			app.resizeCanvas();
		});

		const camera = new pc.Entity('camera');
		camera.addComponent("camera", {
			// clearColor: new pc.Color(0.4, 0.45, 0.5)
		});

		app.start();


		document.body.addEventListener('dragstart', function(e){
			console.log('dragstart')
			e.preventDefault();
			e.stopPropagation();
		}, false);
		document.body.addEventListener('dragover', function(e){
			e.preventDefault();
			e.stopPropagation();
		}, false);
		document.body.addEventListener('drop', function(e){
			e.preventDefault();
			e.stopPropagation();

			const
			  files = e.dataTransfer.files,
			  file = files[0],

			  url = URL.createObjectURL(file);

      pc.app.assets.loadFromUrl(url, "container", function (err, asset) {
          const entity = asset.resource.instantiateRenderEntity({
            // castShadows: true
          });
          app.root.addChild(entity);
					console.log('模型加载完成:', entity);
      });

		}, false);
	</script>
</body>
</html>